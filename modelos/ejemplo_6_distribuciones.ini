# Modelo de ejemplo con las 6 distribuciones soportadas
# Análisis de Riesgo Financiero de Inversión

[METADATA]
nombre = analisis_riesgo_inversion
version = 1.0
descripcion = Modelo de análisis de riesgo usando las 6 distribuciones (Normal, Uniform, Exponential, Lognormal, Triangular, Binomial)
autor = VarP System - Fase 3.2
fecha_creacion = 2025-01-15

[VARIABLES]
# Normal: Retorno esperado del mercado (%)
retorno_mercado, float, normal, media=8, std=15

# Uniform: Tasa de interés libre de riesgo (%)
tasa_libre_riesgo, float, uniform, min=2, max=5

# Exponential: Tiempo hasta evento de riesgo (años)
tiempo_evento_riesgo, float, exponential, lambda=0.2

# Lognormal: Precio del activo subyacente ($)
precio_activo, float, lognormal, mu=4.6, sigma=0.3

# Triangular: Costos operacionales ($)
costos_operacionales, float, triangular, left=1000, mode=1500, right=2500

# Binomial: Número de contratos exitosos (de 20 intentos, 60% probabilidad)
contratos_exitosos, int, binomial, n=20, p=0.6

[FUNCION]
tipo = codigo
codigo =
    # Análisis de riesgo financiero integrado
    import math

    # 1. Calcular retorno ajustado por riesgo
    retorno_ajustado = retorno_mercado - tasa_libre_riesgo

    # 2. Calcular valor del portfolio basado en precio del activo
    # Asumimos 100 unidades del activo
    valor_portfolio = precio_activo * 100

    # 3. Calcular ingresos por contratos
    ingreso_por_contrato = 500  # $500 por contrato
    ingresos_contratos = contratos_exitosos * ingreso_por_contrato

    # 4. Calcular ganancia/pérdida neta
    # Ingresos: retorno del portfolio + contratos
    ganancia_portfolio = valor_portfolio * (retorno_ajustado / 100)
    ingresos_totales = ganancia_portfolio + ingresos_contratos

    # Egresos: costos operacionales
    ganancia_neta = ingresos_totales - costos_operacionales

    # 5. Ajustar por tiempo hasta evento de riesgo
    # Si el evento de riesgo ocurre pronto, penalizar
    factor_tiempo = math.exp(-tiempo_evento_riesgo / 10)
    ganancia_ajustada_riesgo = ganancia_neta * (1 - factor_tiempo * 0.5)

    # 6. Resultado final: ROI (Return on Investment) en %
    inversion_inicial = valor_portfolio + costos_operacionales
    roi = (ganancia_ajustada_riesgo / inversion_inicial) * 100

    resultado = roi

[SIMULACION]
numero_escenarios = 5000
semilla_aleatoria = 42
